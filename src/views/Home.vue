<template>
  <div class="home-container">

    <!-- ุงูุดุฑูุท ุงูุนููู -->
    <div class="top-bar">
      <div class="top-left">
        <i class="fas fa-headset icon"></i>
        <i class="fas fa-envelope icon"></i>
      </div>

      <div class="user-box">
        <div class="welcome">ูุฑุญุจุงุ {{ username }}</div>
        <div class="balance">ุงูุฑุตูุฏ: <strong>{{ balance }} USDT</strong></div>
      </div>

    </div>

    <!-- ุดุฑูุท ุงูุฃุฒุฑุงุฑ -->
    <div class="quick-buttons">
      <button class="quick-btn">ููุฑ ุงูููุช โฑ</button>
      <button class="quick-btn">ููุฑ ุงููุงู ๐ฐ</button>
    </div>

    <!-- ุดุฑูุท ุงูุฅุนูุงู -->
    <div class="notice-bar">
      ๐ ุดุฑุงูุฉ ุนุงูููุฉ ูุน Amazon, eBay, Etsy, Walmart ูุฃูุซุฑ!
    </div>

    <!-- ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ -->
    <div class="grid-menu">
      <div
        class="item"
        v-for="item in menu"
        :key="item.title"
        @click="go(item.route)"
      >
        <div class="icon-box">
          <i :class="item.icon"></i>
        </div>
        <p>{{ item.title }}</p>
      </div>
    </div>

    <!-- ุงูุจุงูุฑ -->
    <div class="banner">
      <img src="https://i.ibb.co/H7J3mpm/amazon-banner.jpg" />
    </div>

    <!-- ุฅุนูุงู Popup -->
    <div id="companyAd" class="ad-overlay" v-if="showAd">
      <div class="ad-box">
        <h2>ุฅุนูุงู</h2>

        <div class="ad-content">
          <p>
            ๐๐๐๐ ูุฑุญุจุง ุจุงูุฌููุน! ุชุฃุณุณุช Mall of the world ูู ุณูุบุงููุฑุฉ ูู 20 ุฃุบุณุทุณ 2021 ูููุฑูุง ุญุงูููุง ูู ููุทูุฉ ุงูุฃุนูุงู ุงููุฑูุฒูุฉ ูู ุณูุบุงููุฑุฉ. ูุญู ุดุฑูุฉ ุงุณุชุซูุงุฑ ูู ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ ูุน ูุฑูู ุชููู ููู ูููุฉ ูุงููุฉ ูููุฉ.
            <br>
            ูุชุนุงูู Mall of the world ูุน ุนุดุฑุงุช ุดุฑูุงุช ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ ูุซู Amazon ู eBay ู Tiktok ู Aliexpress ู Alibaba ู Shopee ุ ุฅูุฎ. ููุณุงุนุฏุฉ ุงูุชุฌุงุฑ ุนูู ุฒูุงุฏุฉ ูุจูุนุงุช ุงูููุชุฌุงุช ุงูุฎุงุตุฉ ุจูู ุ ููููููุง ุฃูุถูุง ุชุญููู ุฃุฑุจุงุญ ููู.
            <br><br>
            ๐1: ุงูุญุฏ ุงูุฃุฏูู ููุจูุบ ุฅุนุงุฏุฉ ุงูุดุญู: 12 USDT ุ ุงูุญุฏ ุงูุฃุฏูู ููุณุญุจ ุงูููุฏู: 3 USDT
            <br>
            ๐ฐ2: ุชุณุชุซูุฑ ุงูููุตุฉ ุนูู ูุณุชูู ุงูุนุงูู ุ ูุฐุง ูุฅู ุงูุงุณุชุซูุงุฑ ูุฏุนู ููุท ุฅุนุงุฏุฉ ุดุญู ุงูุนููุฉ ุงููุดูุฑุฉ.
            <br>
            ๐3: ููุช ุฅุนุงุฏุฉ ุชุนููู ุงููููุฉ ูู ุงูุณุงุนุฉ 12 ุธูุฑุงู ูู ุณูุบุงููุฑุฉ. ููููู ุงูุญุตูู ุนูู ุงูุฑุจุญ ูู ุฎูุงู ุงุณุชููุงู ุฃูุงูุฑ ุงูุชุงุฌุฑ ูู ููู (ูุฑุฉ ูุงุญุฏุฉ ูู ุงูููู ุ ุตุงูุญุฉ ููุฏุฉ 365 ููููุง).
            <br>
            ๐ฏ4: ููููู ุณุญุจ ุงูููุฏ ูุฑุฉ ูุงุญุฏุฉ ููุท ูู ุงูููู ุ ูุง ููุฌุฏ ุญุฏ ุฒููู ุ ููููู ุณุญุจ ุงูููุฏ ูู ุฃู ููุช ุ ูููุช ุงูุงูุณุญุงุจ ูู 1 ุฅูู 5 ุฏูุงุฆู ุ ูุงูุญุฏ ุงูุฃุฏูู ููุจูุบ ุงูุณุญุจ ูู 3 USDT ุ ููุง ููุฌุฏ ุญุฏ ุฃุนูู.
            <br><br>
            ุนูุฏูุง ูุตู ูุจูุบ ุฅุนุงุฏุฉ ุงูุดุญู ุฅูู ุงููุจูุบ ุงูููุงุจู ุงูุชุงูู ุ ุณูุชู ุชุฑููุฉ ุงูุญุณุงุจ ุชููุงุฆููุง ุฅูู VIP. ูููุง ุฒุงุฏุช ูุจูุบ ุฅุนุงุฏุฉ ุงูุดุญู ุ ูููุง ุฒุงุฏ ุนุฏุฏ USDT ูู ุงูููู!
            <br><br>
            ๐vip1: ุฅุนุงุฏุฉ ุดุญู 12 USDT ุ ุงูุฅูุฑุงุฏุงุช ุงูููููุฉ 3 USDT
            <br>
            ๐vip2: ุฅุนุงุฏุฉ ุงูุดุญู 52 USDT ุ ุงูุฏุฎู ุงููููู 13 USDT
            <br>
            ๐vip3: ุฅุนุงุฏุฉ ุดุญู 100 USDT ุ ุงูุฏุฎู ุงููููู 26 USDT
            <br>
            ๐vip4: ุฅุนุงุฏุฉ ุดุญู 300 USDT ุ ุงูุฏุฎู ุงููููู 82 USDT
            <br>
            ๐VIP5: ุฅุนุงุฏุฉ ุดุญู 500 USDT ุ ุงูุฏุฎู ุงููููู 145 USDT
            <br>
            ๐vip6: ุฅุนุงุฏุฉ ุดุญู 1500 USDT ุ ุงูุฏุฎู ุงููููู 479 USDT
            <br>
            ๐VIP7: ุฅุนุงุฏุฉ ุดุญู 3000 USDT ุ ุงูุฏุฎู ุงููููู 1078 USDT
            <br>
            ๐VIP8: ุฅุนุงุฏุฉ ุดุญู 5000 USDT ุ ุงูุฏุฎู ุงููููู 2000 USDT
            <br>
            ๐vip9: ุฅุนุงุฏุฉ ุดุญู 10000 USDT ุ ุงูุฏุฎู ุงููููู USDT
            <br>
            ๐VIP10: ุฅุนุงุฏุฉ ุดุญู 30000 USDT ุ ุงูุฏุฎู ุงููููู 17699 USDT
            <br>
            ๐VIP11: ุฅุนุงุฏุฉ ุดุญู 90ุ000 ุฏููุงุฑ ุฃูุฑููู ุ ุงูุฏุฎู ุงููููู 81ุ818 USDT
            <br><br>
            ูููู ูููุณุชุฎุฏููู Mall of the world ุงูุชุฑููุฌ ููุธุงููุง ุงูุฃุณุงุณู ูู ุฎูุงู ุฑูุงุจุท ุงูุชูุตูุฉ ูุฏุนูุฉ ุฃุตุฏูุงุฆู ููุงูุถูุงู ุฅูููุง ุนูู Facebook ู Twitter ู Instagram ู YouTube ู Tiktok ู Kaokao ู WhatsApp ู Telegram. ุนูุฏูุง ูุณุฌู ุดุฎุต ูุง ูููุชูู ูู Top-Up ุ ุชุญุตู ุนูู ููุงูุฃุฉ ุชุตู ุฅูู 9 ูช.
            <br><br>
            ๐คteam ุงููุณุชูู 3 ุฅุนุงุฏุฉ ุดุญู ููุงูุฃุฉ ุชุตู ุฅูู 9 ูช
            <br>
            ๐คlevel 1 ููุงูุฃุฉ ุฅุนุงุฏุฉ ุดุญู ุงูุฃุนุถุงุก: 6 ูช
            <br>
            ๐คlevel 2 ููุงูุฃุฉ ุฅุนุงุฏุฉ ุดุญู ุงูุฃุนุถุงุก: 2 ูช
            <br>
            ๐คlevel 3 ููุงูุฃุฉ ุฅุนุงุฏุฉ ุดุญู ุงูุฃุนุถุงุก: 1 ูช
            <br>
            ๐คteam ุฅุนุงุฏุฉ ุดุญู ุงููุณุชูู ุงูุฃูู ุงูุจุงูุบ 1000 ุฏููุงุฑ ุฃูุฑููู ุ ูููููู ุงูุญุตูู ุนูู 60 USDT
            <br>
            ๐คteam ุฅุนุงุฏุฉ ุงูุดุญู ุงูุซุงููู ุงูุจุงูุบ 1000 ุฏููุงุฑ ุฃูุฑููู ุ ููููู ุงูุญุตูู ุนูู 20 USDT
            <br>
            ๐คteam ุงููุณุชูู 3 ุฅุนุงุฏุฉ ุดุญู 1000 USDT ุ ูููููู ุงูุญุตูู ุนูู 10 USDT
          </p>
        </div>

        <button @click="closeAd">ุฃูุง ุฃุนุฑู</button>
      </div>
    </div>

  </div>
</template>

<script>
import { auth, db } from "../firebase";
import { doc, getDoc } from "firebase/firestore";
import { onAuthStateChanged } from "firebase/auth";

export default {
  name: "Home",

  data() {
    return {
      username: "ุฌุงุฑู ุงูุชุญููู...",
      balance: 0,
      showAd: false,  // ุญุงูุฉ ุนุฑุถ ุงูุฅุนูุงู ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงูุดุฑูุฉ

      menu: [
        { title: "ุชุนุจุฆุฉ ุฑุตูุฏ", icon: "fas fa-coins", route: "/recharge" },
        { title: "ุณุญุจ", icon: "fas fa-wallet", route: "/withdraw" },
        { title: "ุงููุนุงููุงุช", icon: "fas fa-history", route: "/transactions" },
        { title: "ุจุฑูุงูุฌ", icon: "fas fa-download", route: "/program" },
        { title: "ุงูุฃุตุฏูุงุก", icon: "fas fa-users", route: "/team" },
        { title: "ุงูููุงูุงุช", icon: "fas fa-id-card", route: "/agency" }
      ]
    };
  },

  created() {
    this.watchUser();
  },

  methods: {
    // ๐ฅ ูุฑุงูุจุฉ ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู
    watchUser() {
      onAuthStateChanged(auth, async (user) => {
        if (!user) {
          this.username = "ุบูุฑ ูุณุฌู";
          this.balance = 0;
          return;
        }

        await this.loadUserData(user.uid, user.email);
      });
    },

    // ๐ฅ ุชุญููู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู Firestore
    async loadUserData(uid, email) {
      try {
        const snap = await getDoc(doc(db, "users", uid));

        if (snap.exists()) {
          const data = snap.data();
          this.username = data.username || data.email || email;
          this.balance = data.balance ?? 0;
        } else {
          this.username = email;
          this.balance = 0;
        }
      } catch (err) {
        console.error("Error loading user data:", err);
        this.username = email;
        this.balance = 0;
      }
    },

    go(route) {
      this.$router.push(route);
    },

    // ุนุฑุถ ุงูุฅุนูุงู ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ "ุงูุดุฑูุฉ"
    showCompanyAd() {
      this.showAd = true;
    },

    // ุฅุบูุงู ุงูุฅุนูุงู
    closeAd() {
      this.showAd = false;
    }
  }
};
</script>

<style scoped>
.home-container {
  direction: rtl;
  padding: 12px;
  background: linear-gradient(#0d6efd, #6bb4ff);
  min-height: 100vh;
  color: #fff;
}

/* ุงูุดุฑูุท ุงูุนููู */
.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.top-left {
  display: flex;
  gap: 12px;
}

.icon {
  font-size: 22px;
  color: white;
}

.user-box {
  text-align: left;
}

.welcome {
  font-size: 16px;
  font-weight: bold;
}

.balance {
  margin-top: 4px;
  font-size: 14px;
}

/* ุดุฑูุท ุงูุฃุฒุฑุงุฑ ุงูุณุฑูุนุฉ */
.quick-buttons {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}

.quick-btn {
  flex: 1;
  padding: 12px;
  background: #ffffff;
  border: none;
  border-radius: 12px;
  font-weight: bold;
  color: #0d6efd;
  cursor: pointer;
}

/* ุดุฑูุท ุงูุฅุนูุงู */
.notice-bar {
  background: #ff5722;
  color: white;
  padding: 10px;
  border-radius: 12px;
  text-align: center;
  margin-top: 18px;
  font-weight: bold;
}

/* ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ */
.grid-menu {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 18px;
  margin-top: 20px;
}

.item {
  background: #ffffffaa;
  color: #000;
  padding: 22px 10px;
  border-radius: 22px;
  text-align: center;
  font-weight: bold;
  cursor: pointer;
  transition: transform 0.2s;
}

.item:hover {
  transform: scale(1.03);
}

.icon-box {
  font-size: 28px;
  margin-bottom: 8px;
  color: #0d6efd;
}

/* ุงูุจุงูุฑ */
.banner img {
  width: 100%;
  border-radius: 20px;
  margin-top: 25px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ุฅุนูุงู */
.ad-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.ad-box {
  background: #eaf2ff;
  width: 90%;
  max-width: 400px;
  margin: 15% auto;
  border-radius: 15px;
  padding: 15px;
  text-align: center;
}

.ad-box h2 {
  background: #3b82f6;
  color: white;
  padding: 10px;
  border-radius: 10px;
}

.ad-content {
  max-height: 250px;
  overflow-y: auto;
  margin: 10px 0;
  font-size: 14px;
}

.ad-box button {
  background: #3b82f6;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
}
</style>
